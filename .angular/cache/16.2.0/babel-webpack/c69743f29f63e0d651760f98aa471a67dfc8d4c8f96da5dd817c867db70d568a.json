{"ast":null,"code":"var Ajv = require('ajv');\nvar HARError = require('./error');\nvar schemas = require('har-schema');\nvar ajv;\nfunction createAjvInstance() {\n  var ajv = new Ajv({\n    allErrors: true\n  });\n  ajv.addMetaSchema(require('ajv/lib/refs/json-schema-draft-06.json'));\n  ajv.addSchema(schemas);\n  return ajv;\n}\nfunction validate(name, data) {\n  data = data || {};\n\n  // validator config\n  ajv = ajv || createAjvInstance();\n  var validate = ajv.getSchema(name + '.json');\n  return new Promise(function (resolve, reject) {\n    var valid = validate(data);\n    !valid ? reject(new HARError(validate.errors)) : resolve(data);\n  });\n}\nexports.afterRequest = function (data) {\n  return validate('afterRequest', data);\n};\nexports.beforeRequest = function (data) {\n  return validate('beforeRequest', data);\n};\nexports.browser = function (data) {\n  return validate('browser', data);\n};\nexports.cache = function (data) {\n  return validate('cache', data);\n};\nexports.content = function (data) {\n  return validate('content', data);\n};\nexports.cookie = function (data) {\n  return validate('cookie', data);\n};\nexports.creator = function (data) {\n  return validate('creator', data);\n};\nexports.entry = function (data) {\n  return validate('entry', data);\n};\nexports.har = function (data) {\n  return validate('har', data);\n};\nexports.header = function (data) {\n  return validate('header', data);\n};\nexports.log = function (data) {\n  return validate('log', data);\n};\nexports.page = function (data) {\n  return validate('page', data);\n};\nexports.pageTimings = function (data) {\n  return validate('pageTimings', data);\n};\nexports.postData = function (data) {\n  return validate('postData', data);\n};\nexports.query = function (data) {\n  return validate('query', data);\n};\nexports.request = function (data) {\n  return validate('request', data);\n};\nexports.response = function (data) {\n  return validate('response', data);\n};\nexports.timings = function (data) {\n  return validate('timings', data);\n};","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}